diff --git a/meson.build b/meson.build
index 970f49a52..14736e12e 100644
--- a/meson.build
+++ b/meson.build
@@ -720,7 +720,9 @@ endif
 bfd_dep = cc.find_library('bfd', has_headers: ['bfd.h'], required: get_option('symbol-lookup'))
 if bfd_dep.found() and \
    cc.has_function('bfd_openr', dependencies: [bfd_dep]) and \
-   cc.links(files('meson-cc-tests/bfd-section-flags.c'), name: 'bfd_section_flags', dependencies: bfd_dep)
+   cc.links(files('meson-cc-tests/bfd-section-flags.c'),
+     args: ['-DPACKAGE=cairo -DPACKAGE_VERSION="@0@"'.format(meson.project_version()),],
+     name: 'bfd_section_flags', dependencies: bfd_dep)
   conf.set('HAVE_BFD', 1)
   deps += [bfd_dep]
 elif get_option('symbol-lookup').enabled()
