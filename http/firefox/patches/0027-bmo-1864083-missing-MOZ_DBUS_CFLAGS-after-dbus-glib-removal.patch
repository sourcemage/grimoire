
# HG changeset patch
# User serge-sans-paille <sguelton@mozilla.com>
# Date 1700717864 0
# Node ID f1f5f98290b348616c33083ee0bef41d8c2cc147
# Parent  10a245da54422332b4f1691da8855d9a29add4f9
Bug 1864083 - Add missing MOZ_DBUS_CFLAGS r=glandium

Differential Revision: https://phabricator.services.mozilla.com/D194080

diff --git a/toolkit/components/remote/moz.build b/toolkit/components/remote/moz.build
--- a/toolkit/components/remote/moz.build
+++ b/toolkit/components/remote/moz.build
@@ -20,16 +20,17 @@ if CONFIG["MOZ_WIDGET_TOOLKIT"] == "gtk"
         SOURCES += [
             "nsDBusRemoteClient.cpp",
             "nsDBusRemoteServer.cpp",
         ]
         EXPORTS += [
             "nsUnixRemoteServer.h",
             "RemoteUtils.h",
         ]
+        CXXFLAGS += CONFIG["MOZ_DBUS_CFLAGS"]
     else:
         SOURCES += [
             "nsGTKRemoteServer.cpp",
             "nsXRemoteClient.cpp",
             "nsXRemoteServer.cpp",
         ]
     CXXFLAGS += CONFIG["MOZ_GTK3_CFLAGS"]
 
diff --git a/widget/gtk/moz.build b/widget/gtk/moz.build
--- a/widget/gtk/moz.build
+++ b/widget/gtk/moz.build
@@ -169,10 +169,11 @@ if CONFIG["MOZ_WAYLAND"]:
 
 if CONFIG["MOZ_ENABLE_DBUS"]:
     EXPORTS.mozilla.widget += [
         "AsyncDBus.h",
     ]
     UNIFIED_SOURCES += [
         "AsyncDBus.cpp",
     ]
+    CXXFLAGS += CONFIG["MOZ_DBUS_CFLAGS"]
 
 CXXFLAGS += ["-Werror=switch"]

