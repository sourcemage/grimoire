From eb0d3f9f01f3bfedad1765e5204d7f38e058d010 Mon Sep 17 00:00:00 2001
From: Yingjie Wang <38576654+GaugeAndGravity@users.noreply.github.com>
Date: Fri, 13 Feb 2026 18:40:30 -0500
Subject: [PATCH] cmake: use OpenGL::GLES3 when OpenGL::GL does not exist
 (#13260)

This will allow to build on some systems without X.
---
 CMakeLists.txt | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 9c2a850cfec..f1a0087be1d 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -476,7 +476,11 @@ function(protocolWayland)
   set(PROTOCOL_SOURCES "${PROTOCOL_SOURCES}" PARENT_SCOPE)
 endfunction()
 
-target_link_libraries(hyprland_lib PUBLIC OpenGL::EGL OpenGL::GL Threads::Threads)
+if(TARGET OpenGL::GL)
+  target_link_libraries(hyprland_lib PUBLIC OpenGL::EGL OpenGL::GL Threads::Threads)
+else()
+  target_link_libraries(hyprland_lib PUBLIC OpenGL::EGL OpenGL::GLES3 Threads::Threads)
+endif()
 
 pkg_check_modules(hyprland_protocols_dep hyprland-protocols>=0.6.4)
 if(hyprland_protocols_dep_FOUND)
