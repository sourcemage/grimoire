From 4f4d22f5919059d91b3ac97a7537fb38fbcaf1c4 Mon Sep 17 00:00:00 2001
From: Kirill Primak <vyivel@eclair.cafe>
Date: Mon, 22 Jan 2024 21:24:41 +0300
Subject: [PATCH 07/15] Chase wlroots!4003

Origin: Upstream
Upstream-Status: Backported [commit a4e85332a1fe6b079c6da1689ca33d8ba4c71977]
Signed-off-by: Ismael Luceno <ismael@sourcemage.org>
---
 sway/input/seatop_default.c | 5 +++--
 sway/input/seatop_down.c    | 3 ++-
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/sway/input/seatop_default.c b/sway/input/seatop_default.c
index 1dce6dae2ed4..54dac8dab5e7 100644
--- a/sway/input/seatop_default.c
+++ b/sway/input/seatop_default.c
@@ -802,8 +802,9 @@ static void handle_pointer_axis(struct sway_seat *seat,
 
 	if (!handled) {
 		wlr_seat_pointer_notify_axis(cursor->seat->wlr_seat, event->time_msec,
-			event->orientation, scroll_factor * event->delta,
-			roundf(scroll_factor * event->delta_discrete), event->source);
+			event->orientation, scroll_factor * event->delta, 
+			roundf(scroll_factor * event->delta_discrete), event->source,
+			event->relative_direction);
 	}
 }
 
diff --git a/sway/input/seatop_down.c b/sway/input/seatop_down.c
index 36f9bb608a33..b4421fe6ad0a 100644
--- a/sway/input/seatop_down.c
+++ b/sway/input/seatop_down.c
@@ -137,7 +137,8 @@ static void handle_pointer_axis(struct sway_seat *seat,
 
 	wlr_seat_pointer_notify_axis(seat->wlr_seat, event->time_msec,
 		event->orientation, scroll_factor * event->delta,
-		roundf(scroll_factor * event->delta_discrete), event->source);
+		roundf(scroll_factor * event->delta_discrete), event->source,
+		event->relative_direction);
 }
 
 static void handle_button(struct sway_seat *seat, uint32_t time_msec,
-- 
2.46.0

