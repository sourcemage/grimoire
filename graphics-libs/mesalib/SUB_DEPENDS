case $THIS_SUB_DEPENDS in
  DRI)
    MESALIB_BUILD=dri              &&
    persistent_add  MESALIB_BUILD  &&

    message "${MESSAGE_COLOR}DRI support requested, forcing build type"  \
            "$MESALIB_BUILD for architecture\n${SMGL_COMPAT_ARCHS[1]}."  \
            "$DEFAULT_COLOR"                                             &&
    list_remove  MESALIB_DRIVERS  nouveau  || true
    list_remove  MESALIB_DRIVERS  i915tex  || true

    . $GRIMOIRE/config_query_multi.function                              &&
   if [[ $MESALIB_BUILD == dri ]]; then
      if  [[  "$MESALIB_GIT"  ==  "y"  ]];  then
         AVAILABLE_DRIVERS="i810 i915 i965 mach64 mga r128 r200 r300 r600 radeon s3v savage sis tdfx trident unichrome ffb swrast"
      else
         AVAILABLE_DRIVERS="i810 i915 i965 mach64 mga r128 r200 r300 radeon s3v savage sis tdfx trident unichrome ffb swrast"
      fi
   config_query_multi MESALIB_DRIVERS                                    \
                      "What drivers would you like to build?"            \
                      $AVAILABLE_DRIVERS                                 &&
     if list_find "$MESALIB_DRIVERS" all
     then
     MESALIB_DRIVERS="$AVAILABLE_DRIVERS"
     fi
   fi                                                                    ;;

  *) echo "Unknown sub_depends!"; return 1 ;;
esac
