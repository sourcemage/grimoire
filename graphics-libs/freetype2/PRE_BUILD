default_pre_build                                      &&
cd  $SOURCE_DIRECTORY                                  &&

patch  -p1  <  $SCRIPT_DIRECTORY/ft2build.patch        &&

if [[ $FT2_BYTECODE == n ]]; then
  sed -i "s:#define TT_CONFIG_OPTION_BYTECODE_INTERPRETER::" \
         include/freetype/config/ftoption.h
fi &&

if [[ $FT2_SUBPIXEL == y ]]; then
  sedit  's:/\* \(#define FT_CONFIG_OPTION_SUBPIXEL_RENDERING\) \*/:\1:'  \
    include/freetype/config/ftoption.h
fi
if [[ $FT2_FIR_FILTER == light ]]; then
  sedit  '/FT_END_HEADER/i#define FT_FORCE_LIGHT_LCD_FILTER'  \
    include/freetype/config/ftoption.h
elif [[ $FT2_FIR_FILTER == legacy ]]; then
  sedit  '/FT_END_HEADER/i#define FT_FORCE_LEGACY_LCD_FILTER'  \
    include/freetype/config/ftoption.h
fi
