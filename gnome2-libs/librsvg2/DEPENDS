. "$GRIMOIRE"/FUNCTIONS &&

depends -sub "CAIRO_DEVEL PNG" cairo &&
depends fontconfig &&
depends freetype2 &&
depends glib2 &&
depends harfbuzz &&
depends pango &&
# remove on next stable release (2.48+)
if [[ "${LIBRSVG2_BRANCH}" == "stable" ]]; then
  depends libcroco
fi &&
depends libice &&
depends libpng &&
depends libpthread-stubs &&
depends libx11 &&
depends libxau &&
depends libxcb &&
depends libxdmcp &&
depends libxext &&
depends libxml2 &&
# make icu usage explicit
if is_depends_enabled libxml2 icu;then
  depends icu
fi &&
depends libxrender &&
depends pcre &&
depends pixman &&
depends gdk-pixbuf2 &&
vdepends <<! &&
	rust >= 1.39.0
!

optional_depends gtk-doc                               \
                 "--enable-gtk-doc"                    \
                 "--disable-gtk-doc"                   \
                 "Build documentation with gtk-doc"    &&

message "${MESSAGE_COLOR}NOTICE: Vala bindings require ${SPELL_COLOR}gobject-introspection${MESSAGE_COLOR} installed.${DEFAULT_COLOR}" &&

optional_depends vala                                  \
                 "--enable-vala=yes"                   \
                 "--enable-vala=no"                    \
                 "build vala bindings"                 &&

if is_depends_enabled $SPELL vala; then
  depends gobject-introspection
else
  optional_depends gobject-introspection               \
                 "--enable-introspection"              \
                 "--disable-introspection"             \
                 "Enable introspection"
fi &&

optional_depends gtk+3 '' '' 'GTK3 support'

