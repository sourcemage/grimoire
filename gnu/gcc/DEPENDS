. $GRIMOIRE/libcompat  &&
if list_find "$GCC_COMPILER" "java" ; then
  depends  unzip  &&
  depends  zip  &&

  if [[ $GCJ_AWT == y ]]; then
    depends  gtk+2 '--enable-java-awt=gtk'  &&
    depends  libart_lgpl                    &&
    depends  libxtst
  fi
fi &&
depends  diffutils       &&
depends  gmp             &&
depends  gnupg           &&
depends  libmpc          &&
depends  mpfr            &&
depends  smgl-fhs        &&
depends  smgl-archspecs  &&
depends  zlib "--with-system-zlib" &&

#optional_depends cloog-ppl \
#                 "--with-cloog --disable-cloog-version-check" \
#                 "--without-cloog" \
#                 "use Graphite high-level memory optimizations?" &&
#if is_depends_enabled $SPELL cloog-ppl ; then
#  depends ppl "--with-ppl --enable-cloog-backend=ppl"
#fi &&


optional_depends gettext \
                 "--enable-nls" \
                 "--disable-nls" \
                 "for Native Language Support" &&

if  [[ "$(installed_version mpfr|sed 's:\.::g')" < 230 ]]
then
  force_depends  mpfr
fi  &&

if spell_ok gmp; then
  persistent_read gmp GMP_BUILD_ARCH GMP_BUILD_ARCH || true
fi                                                        &&
if spell_ok mpfr; then
  persistent_read mpfr MPFR_BUILD_ARCH MPFR_BUILD_ARCH || true
fi                                                        &&

if [[ $GMP_BUILD_ARCH  != ${SMGL_COMPAT_ARCHS[4]}
   || $MPFR_BUILD_ARCH != ${SMGL_COMPAT_ARCHS[4]} ]]; then
  force_depends gmp &&
  force_depends mpfr
fi
